%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% File jspreslist.sty
%%
%% Generate a presentation list for a course
%%
%% This file is part of the jslectureplanner bundle.
%%
%% Author: Juergen Spitzmueller <juergen.spitzmueller@univie.ac.at>
%%
%% This work may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%%   http://www.latex-project.org/lppl.txt
%% and version 1.3 or later is part of all distributions of LaTeX
%% version 2003/12/01 or later.
%%
%% This work has the LPPL maintenance status "maintained".
%% 
%% The Current Maintainer of this work is Juergen Spitzmueller.
%%
%% Code repository and issue tracker: https://github.com/jspitz/jslectureplanner
%%
%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\def\filedate{2015/07/08}
\def\fileversion{1.1dev}
\def\filename{jspreslist.sty}

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{jspreslist}
	[\filedate\space v\fileversion\space JS Course presentation list generation]

%
% REQUIRED PACKAGES
%

\RequirePackage{ifthen}
\RequirePackage{calc}
\RequirePackage{etoolbox}
\RequirePackage{jslectureplanner}

%
% COUNTERS
%

\newcounter{session}

%
% GET VALUES
%

\newcommand*\setfirstsession[1]{%
  \setcounter{session}{#1}
}

\providecommand*\lecprogramlistindent{\textbf{88.\,88.}}

\newcommand\makepreslist{%
  \@ifstar{\@makeblankpreslist}{\@makepreslist}%
}

\newcommand\@makepreslist{%
  \begin{labeling}{\lecprogramlistindent}
  \whiledo {\not{\value{session} > \value{snum}}}%
  {%
    \ThisSession{\thesession}%
    \if\relax\sespresstudents\relax
    \MakeProgramline{\thesession}\par
     ---
    \else
    \MakeProgramline{\thesession}\par
    \SessionPresStudents{\thesession}
    \fi
    \stepcounter{session}%
  }
  \end{labeling}
}

\newcommand\@makeblankpreslist{%
  \begin{labeling}{\lecprogramlistindent}
  \whiledo {\not{\value{session} > \value{snum}}}%
  {%
    \MakeProgramline{\thesession}\vspace{2\baselineskip}
    \stepcounter{session}%
  }
  \end{labeling}
}

\newcommand\makebeamerpreslist{%
  \begin{description}[\lecprogramlistindent]
  \whiledo {\not{\value{session} > \value{snum}}}%
  {%
    \MakeProgramline{\thesession}: \SessionPresStudents{\thesession}
    \stepcounter{session}%
  }
  \end{description}
}

% Finis!
%%%
